C51 COMPILER V9.60.0.0   MAIN                                                              02/22/2021 17:13:49 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Include) DEFINE(FOSC_160000) DE
                    -BUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "N76E003.h"
   2          #include "SFR_Macro.h"
   3          #include "Function_define.h"
   4          #include "Common.h"
   5          #include "Delay.h"
   6          #include <oled_i2c.h>
   7          
   8          #define SYS_CLK_EN              0
   9          #define SYS_SEL                 2
  10          #define SYS_DIV_EN              0                   //0: Fsys=Fosc, 1: Fsys = Fosc/(2*CKDIV)
  11          #define SYS_DIV                 1
  12          #define I2C_CLOCK               2
  13          #define bit_to_voltage_ratio    0.0008056640625     // 3.3V divided by 4096 For 12-Bit ADC
  14          
  15          float voltage;
  16          char str_voltage[20];
  17          char str[20];
  18          
  19          code char IPL_Logo [] = {
  20          // 'LOGO Mono chrome', 128x64px
  21          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  22          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  23          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  24          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  25          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  26          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  27          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  28          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  29          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  30          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  31          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  32          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  33          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  34          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  35          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  36          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  37          0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xf0, 0xf0, 0xe0, 0x60, 0x78, 0x78, 0x78, 0x60, 0x60, 0xe0, 
  38          0xf0, 0xf0, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  39          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  40          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  41          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  42          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  43          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  44          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  45          0xe0, 0xe2, 0xf7, 0xff, 0x0f, 0x03, 0xf9, 0xfc, 0xfc, 0xfc, 0xfc, 0xec, 0xfc, 0xfc, 0xfc, 0xfc, 
  46          0xfc, 0x01, 0x03, 0x1f, 0xff, 0xf7, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 
  47          0x7c, 0x76, 0xe2, 0xc2, 0xc6, 0x8e, 0x00, 0x00, 0xfe, 0xfe, 0xfe, 0x42, 0x42, 0xe2, 0x06, 0x0e, 
  48          0x00, 0x02, 0xfe, 0x1e, 0x3e, 0x78, 0xf0, 0xc0, 0x02, 0xfe, 0x06, 0x00, 0x00, 0x02, 0xfe, 0xfe, 
  49          0x82, 0x82, 0x82, 0x7e, 0x7c, 0x38, 0x00, 0x02, 0xfe, 0xfe, 0xfe, 0x82, 0x82, 0xe6, 0x7c, 0x3c, 
  50          0x00, 0x00, 0xf0, 0xfc, 0xfc, 0x06, 0x02, 0x02, 0x06, 0x3e, 0xfc, 0xf8, 0x00, 0x00, 0x02, 0xfe, 
  51          0x1e, 0x7c, 0xf0, 0xe0, 0x80, 0x06, 0xfe, 0x02, 0x00, 0x02, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0xe0, 
  52          0xf8, 0xfc, 0x06, 0x02, 0x02, 0x02, 0x0e, 0x00, 0x00, 0x3c, 0x7c, 0xf6, 0xe2, 0xc2, 0x86, 0x0e, 
  53          0x00, 0x09, 0x3f, 0x1f, 0x3c, 0xf0, 0xe7, 0xef, 0xcf, 0x8f, 0x8f, 0x8f, 0x8f, 0x8f, 0xcf, 0xcf, 
  54          0xef, 0xe0, 0xf8, 0x1e, 0x3f, 0x3b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 
C51 COMPILER V9.60.0.0   MAIN                                                              02/22/2021 17:13:49 PAGE 2   

  55          0x18, 0x10, 0x10, 0x09, 0x0f, 0x07, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x0c, 0x0c, 
  56          0x00, 0x00, 0x0f, 0x08, 0x00, 0x00, 0x01, 0x07, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x08, 0x0f, 0x0f, 
  57          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x00, 0x01, 0x07, 0x0f, 0x0e, 
  58          0x08, 0x00, 0x03, 0x07, 0x0f, 0x08, 0x10, 0x10, 0x08, 0x0f, 0x07, 0x03, 0x00, 0x00, 0x08, 0x0f, 
  59          0x00, 0x00, 0x01, 0x03, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x03, 
  60          0x07, 0x0f, 0x08, 0x10, 0x10, 0x18, 0x0c, 0x00, 0x00, 0x0c, 0x18, 0x10, 0x10, 0x09, 0x0f, 0x07, 
  61          0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x01, 0x00, 0x01, 0x03, 0x07, 0x07, 0x01, 0x01, 0x01, 
  62          0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  63          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  64          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  65          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  66          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  67          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  68          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  69          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  70          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  71          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  72          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  73          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  74          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  75          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  76          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  77          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  78          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  79          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  80          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  81          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  82          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  83          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  84          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  85          };
  86          
  87          
  88          void Init_I2C(void){
  89   1          P13_OpenDrain_Mode;         // Modify SCL pin to Open drain mode. don't forget the pull high resister in cir
             -cuit
  90   1          P14_OpenDrain_Mode;         // Modify SDA pin to Open drain mode. don't forget the pull high resister in cir
             -cuit
  91   1        
  92   1          /* Set I2C clock rate */
  93   1          I2CLK = I2C_CLOCK; 
  94   1      
  95   1          /* Enable I2C */
  96   1          set_I2CEN;                                   
  97   1      }
  98          unsigned int ADC_read(void){
  99   1        register unsigned int adc_value = 0x0000;
 100   1        clr_ADCF;
 101   1        set_ADCS;                  
 102   1        while(ADCF == 0);
 103   1        adc_value = ADCRH;
 104   1        adc_value <<= 4;
 105   1        adc_value |= ADCRL;
 106   1        return adc_value;
 107   1      }
 108          
 109          void main()
 110          {
 111   1          int adc_data;
 112   1          Set_All_GPIO_Quasi_Mode;
 113   1       
 114   1          Enable_ADC_AIN1;      // Enable AIN0 P30 as ADC input, Find in "Function_define.h" - "ADC INIT"
C51 COMPILER V9.60.0.0   MAIN                                                              02/22/2021 17:13:49 PAGE 3   

 115   1          Init_I2C();
 116   1          OLED_Init();          // Check oled_i2c.c file for SCL,SDA pin connection
 117   1            
 118   1          OLED_DisplayLogo(IPL_Logo);
 119   1          Timer0_Delay1ms(1000);
 120   1          OLED_Clear(); 
 121   1        
 122   1          OLED_SetCursor(2,0);  //Set cursor at 2nd-line 0th-Position
 123   1          OLED_DisplayString("ADC Reading: ");  
 124   1        
 125   1        while(1)
 126   1          {
 127   2            adc_data = ADC_read();
 128   2            sprintf( str, "Reading: %d", adc_data);
 129   2            voltage = adc_data * bit_to_voltage_ratio;
 130   2            sprintf( str_voltage, "Volt: %0.2fV", voltage);
 131   2          
 132   2            OLED_SetCursor(4,20); //Set cursor at 4th-line 20th-Position
 133   2            OLED_DisplayString(str);
 134   2          
 135   2            OLED_SetCursor(6,30); //Set cursor at 6th-line 30th-Position
 136   2            OLED_DisplayString(str_voltage);   
 137   2            Timer0_Delay1ms(200); 
 138   2          };
 139   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =   1063    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     44       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
